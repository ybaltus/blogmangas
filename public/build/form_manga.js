(window["webpackJsonp"] = window["webpackJsonp"] || []).push([["form_manga"],{

/***/ "./assets/js/form_manga.js":
/*!*********************************!*\
  !*** ./assets/js/form_manga.js ***!
  \*********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function($) {__webpack_require__(/*! core-js/modules/es.array.find */ "./node_modules/core-js/modules/es.array.find.js");

__webpack_require__(/*! core-js/modules/es.regexp.exec */ "./node_modules/core-js/modules/es.regexp.exec.js");

__webpack_require__(/*! core-js/modules/es.string.replace */ "./node_modules/core-js/modules/es.string.replace.js");

var $isScanCheckbox = $('#manga_exist_scan');
var $divScans = $('#div_scans');
var $isEpisodeCheckbox = $('#manga_exist_episode');
var $divAnimes = $('#div_animes');
var $divImages = $('#div_images');
var $collectionAnimeHolder;
var $collectionImageHolder;
var $collectionImageHolderCurrent;
var $collectionAnimeHolderCurrent;
var $addEpisodeButton = $('<button type="button" class="btn btn-secondary add_anime_link" style="margin-bottom: 20px">Ajouter un Ã©pisode</button>');
var $newLinkAnimeDiv = $('<div></div>').append($addEpisodeButton);
var $addImageButton = $('<button type="button" class="btn btn-secondary add_image_link mt-3" style="margin-bottom: 20px">Ajouter une image</button>');
var $newLinkImageDiv = $('<div></div>').append($addImageButton);
$('fieldset').hide();
$(document).ready(function () {
  //Scans checkbox
  $isScanCheckbox.on('click', function (e) {
    if ($(this).is(":checked")) {
      $divScans.removeAttr('hidden');
    } else if ($(this).is(":not(:checked)")) {
      $divScans.attr('hidden', $divScans);
    }
  }); //Anime checkbox

  $isEpisodeCheckbox.on('click', function (e) {
    if ($(this).is(":checked")) {
      $divAnimes.removeAttr('hidden');
    } else if ($(this).is(":not(:checked)")) {
      $divAnimes.attr('hidden', $divAnimes);
    }
  }); //Anime Collection

  $collectionAnimeHolder = $('div.animes_add');
  $collectionAnimeHolderCurrent = $('div.animes_current');
  $collectionAnimeHolder.append($newLinkAnimeDiv);
  $collectionAnimeHolder.data('index', $collectionAnimeHolderCurrent.find('.anime').length + $collectionAnimeHolder.find('.anime').length);
  $addEpisodeButton.on('click', function (e) {
    e.preventDefault();
    addEpisodeForm($collectionAnimeHolder, $newLinkAnimeDiv);
  });
  $collectionAnimeHolder.find('.anime').each(function () {
    addAnimeFormDeleteLink($(this));
  }); //Image Collection

  $collectionImageHolder = $('div.images_new');
  $collectionImageHolderCurrent = $('div.images_current');
  $collectionImageHolder.append($newLinkImageDiv);
  $collectionImageHolder.data('index', $collectionImageHolderCurrent.find('.image').length + $collectionImageHolder.find('.image').length);
  $addImageButton.on('click', function (e) {
    e.preventDefault();
    addImageForm($collectionImageHolder, $newLinkImageDiv);
  });
  $collectionImageHolder.find('.image').each(function () {
    addImageFormDeleteLink($(this));
  }); //Anime functions

  function addEpisodeForm($collectionAnimeHolder, $newLinkAnimeDiv) {
    var prototype = $collectionAnimeHolder.data('prototype');
    var index = $collectionAnimeHolder.data('index');
    var newForm = prototype;
    newForm = newForm.replace(/__name__label__/g, index);
    newForm = newForm.replace(/__name__/g, index);
    $collectionAnimeHolder.data('index', index + 1);
    var $newFormDiv = $('<div class="anime"></div>').append(newForm);
    $newFormDiv.find('#manga_animes_' + index).find('.form-group').addClass('col-md-4');
    $newFormDiv.find('#manga_animes_' + index).find('.form-control').addClass('col-md-6');
    $newFormDiv.append('<hr>');
    $newLinkAnimeDiv.before($newFormDiv);
    addAnimeFormDeleteLink($newFormDiv);
  }

  function addAnimeFormDeleteLink($newFormDiv) {
    var $removeFormButton = $('<button type="button" class="btn btn-danger">Supprimer cet anime</button>');
    $newFormDiv.append($removeFormButton);
    $removeFormButton.on('click', function (e) {
      $newFormDiv.remove();
    });
  } //Image functions


  function addImageForm($collectionImageHolder, $newLinkImageDiv) {
    var prototype = $collectionImageHolder.data('prototype');
    var index = $collectionImageHolder.data('index');
    var newForm = prototype;
    newForm = newForm.replace(/__name__label__/g, index);
    newForm = newForm.replace(/__name__/g, index);
    $collectionImageHolder.data('index', index + 1);
    var $newFormDiv = $('<div class="image"></div>').append(newForm).append('<hr>');
    $newFormDiv.find('#manga_images_' + index).find('label.custom-file-label').text('Choisir un fichier');
    $newLinkImageDiv.before($newFormDiv);
    addImageFormDeleteLink($newFormDiv);
  }

  function addImageFormDeleteLink($newFormDiv) {
    var $removeFormButton = $('<button type="button" class="btn btn-danger">Supprimer cette image</button>');
    $newFormDiv.append($removeFormButton);
    $removeFormButton.on('click', function (e) {
      $newFormDiv.remove();
    });
  }
});
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.js")))

/***/ })

},[["./assets/js/form_manga.js","runtime","vendors~app~form_manga~manga~select2","vendors~form_manga"]]]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hc3NldHMvanMvZm9ybV9tYW5nYS5qcyJdLCJuYW1lcyI6WyIkaXNTY2FuQ2hlY2tib3giLCIkIiwiJGRpdlNjYW5zIiwiJGlzRXBpc29kZUNoZWNrYm94IiwiJGRpdkFuaW1lcyIsIiRkaXZJbWFnZXMiLCIkY29sbGVjdGlvbkFuaW1lSG9sZGVyIiwiJGNvbGxlY3Rpb25JbWFnZUhvbGRlciIsIiRjb2xsZWN0aW9uSW1hZ2VIb2xkZXJDdXJyZW50IiwiJGNvbGxlY3Rpb25BbmltZUhvbGRlckN1cnJlbnQiLCIkYWRkRXBpc29kZUJ1dHRvbiIsIiRuZXdMaW5rQW5pbWVEaXYiLCJhcHBlbmQiLCIkYWRkSW1hZ2VCdXR0b24iLCIkbmV3TGlua0ltYWdlRGl2IiwiaGlkZSIsImRvY3VtZW50IiwicmVhZHkiLCJvbiIsImUiLCJpcyIsInJlbW92ZUF0dHIiLCJhdHRyIiwiZGF0YSIsImZpbmQiLCJsZW5ndGgiLCJwcmV2ZW50RGVmYXVsdCIsImFkZEVwaXNvZGVGb3JtIiwiZWFjaCIsImFkZEFuaW1lRm9ybURlbGV0ZUxpbmsiLCJhZGRJbWFnZUZvcm0iLCJhZGRJbWFnZUZvcm1EZWxldGVMaW5rIiwicHJvdG90eXBlIiwiaW5kZXgiLCJuZXdGb3JtIiwicmVwbGFjZSIsIiRuZXdGb3JtRGl2IiwiYWRkQ2xhc3MiLCJiZWZvcmUiLCIkcmVtb3ZlRm9ybUJ1dHRvbiIsInJlbW92ZSIsInRleHQiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFBLElBQU1BLGVBQWUsR0FBR0MsQ0FBQyxDQUFDLG1CQUFELENBQXpCO0FBQ0EsSUFBTUMsU0FBUyxHQUFHRCxDQUFDLENBQUMsWUFBRCxDQUFuQjtBQUNBLElBQU1FLGtCQUFrQixHQUFHRixDQUFDLENBQUMsc0JBQUQsQ0FBNUI7QUFDQSxJQUFNRyxVQUFVLEdBQUdILENBQUMsQ0FBQyxhQUFELENBQXBCO0FBQ0EsSUFBTUksVUFBVSxHQUFHSixDQUFDLENBQUMsYUFBRCxDQUFwQjtB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Q0FBQ1osSUFBWixDQUFpQixtQkFBaUJTLEtBQWxDLEVBQXlDVCxJQUF6QyxDQUE4Qyx5QkFBOUMsRUFBeUVpQixJQUF6RSxDQUE4RSxvQkFBOUU7QUFDQTNCLG9CQUFnQixDQUFDd0IsTUFBakIsQ0FBd0JGLFdBQXhCO0FBQ0FMLDBCQUFzQixDQUFDSyxXQUFELENBQXRCO0FBQ0g7O0FBRUQsV0FBU0wsc0JBQVQsQ0FBZ0NLLFdBQWhDLEVBQTZDO0FBQ3pDLFFBQUlHLGlCQUFpQixHQUFHdEMsQ0FBQyxDQUFDLDZFQUFELENBQXpCO0FBQ0FtQyxlQUFXLENBQUN4QixNQUFaLENBQW1CMkIsaUJBQW5CO0FBRUFBLHFCQUFpQixDQUFDckIsRUFBbEIsQ0FBcUIsT0FBckIsRUFBOEIsVUFBU0MsQ0FBVCxFQUFZO0FBQ3RDaUIsaUJBQVcsQ0FBQ0ksTUFBWjtBQUNILEtBRkQ7QUFHSDtBQUNKLENBckdELEUiLCJmaWxlIjoiZm9ybV9tYW5nYS5qcyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0ICRpc1NjYW5DaGVja2JveCA9ICQoJyNtYW5nYV9leGlzdF9zY2FuJyk7XG5jb25zdCAkZGl2U2NhbnMgPSAkKCcjZGl2X3NjYW5zJyk7XG5jb25zdCAkaXNFcGlzb2RlQ2hlY2tib3ggPSAkKCcjbWFuZ2FfZXhpc3RfZXBpc29kZScpO1xuY29uc3QgJGRpdkFuaW1lcyA9ICQoJyNkaXZfYW5pbWVzJyk7XG5jb25zdCAkZGl2SW1hZ2VzID0gJCgnI2Rpdl9pbWFnZXMnKTtcblxudmFyICRjb2xsZWN0aW9uQW5pbWVIb2xkZXI7XG52YXIgJGNvbGxlY3Rpb25JbWFnZUhvbGRlcjtcbnZhciAkY29sbGVjdGlvbkltYWdlSG9sZGVyQ3VycmVudDtcbnZhciAkY29sbGVjdGlvbkFuaW1lSG9sZGVyQ3VycmVudDtcbnZhciAkYWRkRXBpc29kZUJ1dHRvbiA9ICQoJzxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi1zZWNvbmRhcnkgYWRkX2FuaW1lX2xpbmtcIiBzdHlsZT1cIm1hcmdpbi1ib3R0b206IDIwcHhcIj5Bam91dGVyIHVuIMOpcGlzb2RlPC9idXR0b24+Jyk7XG52YXIgJG5ld0xpbmtBbmltZURpdiA9ICQoJzxkaXY+PC9kaXY+JykuYXBwZW5kKCRhZGRFcGlzb2RlQnV0dG9uKTtcbnZhciAkYWRkSW1hZ2VCdXR0b24gPSAkKCc8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ0biBidG4tc2Vjb25kYXJ5IGFkZF9pbWFnZV9saW5rIG10LTNcIiBzdHlsZT1cIm1hcmdpbi1ib3R0b206IDIwcHhcIj5Bam91dGVyIHVuZSBpbWFnZTwvYnV0dG9uPicpO1xudmFyICRuZXdMaW5rSW1hZ2VEaXYgPSAkKCc8ZGl2PjwvZGl2PicpLmFwcGVuZCgkYWRkSW1hZ2VCdXR0b24pO1xuJCgnZmllbGRzZXQnKS5oaWRlKCk7XG5cbiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKClcbntcbiAgICAvL1NjYW5zIGNoZWNrYm94XG4gICAgJGlzU2NhbkNoZWNrYm94Lm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpe1xuICAgICAgICBpZigkKHRoaXMpLmlzKFwiOmNoZWNrZWRcIikpe1xuICAgICAgICAgICAgJGRpdlNjYW5zLnJlbW92ZUF0dHIoJ2hpZGRlbicpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYoJCh0aGlzKS5pcyhcIjpub3QoOmNoZWNrZWQpXCIpKXtcbiAgICAgICAgICAgICRkaXZTY2Fucy5hdHRyKCdoaWRkZW4nLCAkZGl2U2NhbnMpO1xuICAgICAgICB9XG4gICAgfSlcblxuICAgIC8vQW5pbWUgY2hlY2tib3hcbiAgICAkaXNFcGlzb2RlQ2hlY2tib3gub24oJ2NsaWNrJywgZnVuY3Rpb24oZSl7XG4gICAgICAgIGlmKCQodGhpcykuaXMoXCI6Y2hlY2tlZFwiKSl7XG4gICAgICAgICAgICAkZGl2QW5pbWVzLnJlbW92ZUF0dHIoJ2hpZGRlbicpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYoJCh0aGlzKS5pcyhcIjpub3QoOmNoZWNrZWQpXCIpKXtcbiAgICAgICAgICAgICRkaXZBbmltZXMuYXR0cignaGlkZGVuJywgJGRpdkFuaW1lcyk7XG4gICAgICAgIH1cbiAgICB9KVxuXG4gICAgLy9BbmltZSBDb2xsZWN0aW9uXG4gICAgJGNvbGxlY3Rpb25BbmltZUhvbGRlciA9ICQoJ2Rpdi5hbmltZXNfYWRkJyk7XG4gICAgJGNvbGxlY3Rpb25BbmltZUhvbGRlckN1cnJlbnQgPSAkKCdkaXYuYW5pbWVzX2N1cnJlbnQnKTtcbiAgICAkY29sbGVjdGlvbkFuaW1lSG9sZGVyLmFwcGVuZCgkbmV3TGlua0FuaW1lRGl2KTtcbiAgICAkY29sbGVjdGlvbkFuaW1lSG9sZGVyLmRhdGEoJ2luZGV4JywgKCRjb2xsZWN0aW9uQW5pbWVIb2xkZXJDdXJyZW50LmZpbmQoJy5hbmltZScpLmxlbmd0aCArICRjb2xsZWN0aW9uQW5pbWVIb2xkZXIuZmluZCgnLmFuaW1lJykubGVuZ3RoKSk7XG4gICAgJGFkZEVwaXNvZGVCdXR0b24ub24oJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICAgICAgYWRkRXBpc29kZUZvcm0oJGNvbGxlY3Rpb25BbmltZUhvbGRlciwgJG5ld0xpbmtBbmltZURpdik7XG4gICAgfSk7XG5cbiAgICAkY29sbGVjdGlvbkFuaW1lSG9sZGVyLmZpbmQoJy5hbmltZScpLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgIGFkZEFuaW1lRm9ybURlbGV0ZUxpbmsoJCh0aGlzKSk7XG4gICAgfSk7XG5cbiAgICAvL0ltYWdlIENvbGxlY3Rpb25cbiAgICAkY29sbGVjdGlvbkltYWdlSG9sZGVyID0gJCgnZGl2LmltYWdlc19uZXcnKTtcbiAgICAkY29sbGVjdGlvbkltYWdlSG9sZGVyQ3VycmVudCA9ICQoJ2Rpdi5pbWFnZXNfY3VycmVudCcpO1xuICAgICRjb2xsZWN0aW9uSW1hZ2VIb2xkZXIuYXBwZW5kKCRuZXdMaW5rSW1hZ2VEaXYpO1xuICAgICRjb2xsZWN0aW9uSW1hZ2VIb2xkZXIuZGF0YSgnaW5kZXgnLCAoJGNvbGxlY3Rpb25JbWFnZUhvbGRlckN1cnJlbnQuZmluZCgnLmltYWdlJykubGVuZ3RoICsgJGNvbGxlY3Rpb25JbWFnZUhvbGRlci5maW5kKCcuaW1hZ2UnKS5sZW5ndGgpKTtcblxuICAgICRhZGRJbWFnZUJ1dHRvbi5vbignY2xpY2snLCBmdW5jdGlvbihlKVxuICAgIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBhZGRJbWFnZUZvcm0oJGNvbGxlY3Rpb25JbWFnZUhvbGRlciwgJG5ld0xpbmtJbWFnZURpdik7XG4gICAgfSlcblxuICAgICRjb2xsZWN0aW9uSW1hZ2VIb2xkZXIuZmluZCgnLmltYWdlJykuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgYWRkSW1hZ2VGb3JtRGVsZXRlTGluaygkKHRoaXMpKTtcbiAgICB9KTtcblxuICAgIC8vQW5pbWUgZnVuY3Rpb25zXG4gICAgZnVuY3Rpb24gYWRkRXBpc29kZUZvcm0oJGNvbGxlY3Rpb25BbmltZUhvbGRlciwgJG5ld0xpbmtBbmltZURpdikge1xuICAgICAgICBsZXQgcHJvdG90eXBlID0gJGNvbGxlY3Rpb25BbmltZUhvbGRlci5kYXRhKCdwcm90b3R5cGUnKTtcbiAgICAgICAgbGV0IGluZGV4ID0gJGNvbGxlY3Rpb25BbmltZUhvbGRlci5kYXRhKCdpbmRleCcpO1xuXG4gICAgICAgIGxldCBuZXdGb3JtID0gcHJvdG90eXBlO1xuICAgICAgICBuZXdGb3JtID0gbmV3Rm9ybS5yZXBsYWNlKC9fX25hbWVfX2xhYmVsX18vZywgaW5kZXgpO1xuICAgICAgICBuZXdGb3JtID0gbmV3Rm9ybS5yZXBsYWNlKC9fX25hbWVfXy9nLCBpbmRleCk7XG4gICAgICAgICRjb2xsZWN0aW9uQW5pbWVIb2xkZXIuZGF0YSgnaW5kZXgnLCBpbmRleCArIDEpO1xuICAgICAgICBsZXQgJG5ld0Zvcm1EaXYgPSAkKCc8ZGl2IGNsYXNzPVwiYW5pbWVcIj48L2Rpdj4nKS5hcHBlbmQobmV3Rm9ybSk7XG4gICAgICAgICRuZXdGb3JtRGl2LmZpbmQoJyNtYW5nYV9hbmltZXNfJytpbmRleCkuZmluZCgnLmZvcm0tZ3JvdXAnKS5hZGRDbGFzcygnY29sLW1kLTQnKTtcbiAgICAgICAgJG5ld0Zvcm1EaXYuZmluZCgnI21hbmdhX2FuaW1lc18nK2luZGV4KS5maW5kKCcuZm9ybS1jb250cm9sJykuYWRkQ2xhc3MoJ2NvbC1tZC02Jyk7XG4gICAgICAgICRuZXdGb3JtRGl2LmFwcGVuZCgnPGhyPicpO1xuICAgICAgICAkbmV3TGlua0FuaW1lRGl2LmJlZm9yZSgkbmV3Rm9ybURpdik7XG4gICAgICAgIGFkZEFuaW1lRm9ybURlbGV0ZUxpbmsoJG5ld0Zvcm1EaXYpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGFkZEFuaW1lRm9ybURlbGV0ZUxpbmsoJG5ld0Zvcm1EaXYpIHtcbiAgICAgICAgbGV0ICRyZW1vdmVGb3JtQnV0dG9uID0gJCgnPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLWRhbmdlclwiPlN1cHByaW1lciBjZXQgYW5pbWU8L2J1dHRvbj4nKTtcbiAgICAgICAgJG5ld0Zvcm1EaXYuYXBwZW5kKCRyZW1vdmVGb3JtQnV0dG9uKTtcblxuICAgICAgICAkcmVtb3ZlRm9ybUJ1dHRvbi5vbignY2xpY2snLCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAkbmV3Rm9ybURpdi5yZW1vdmUoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy9JbWFnZSBmdW5jdGlvbnNcbiAgICBmdW5jdGlvbiBhZGRJbWFnZUZvcm0oJGNvbGxlY3Rpb25JbWFnZUhvbGRlciwgJG5ld0xpbmtJbWFnZURpdikge1xuICAgICAgICBsZXQgcHJvdG90eXBlID0gJGNvbGxlY3Rpb25JbWFnZUhvbGRlci5kYXRhKCdwcm90b3R5cGUnKTtcbiAgICAgICAgbGV0IGluZGV4ID0gJGNvbGxlY3Rpb25JbWFnZUhvbGRlci5kYXRhKCdpbmRleCcpO1xuXG4gICAgICAgIGxldCBuZXdGb3JtID0gcHJvdG90eXBlO1xuICAgICAgICBuZXdGb3JtID0gbmV3Rm9ybS5yZXBsYWNlKC9fX25hbWVfX2xhYmVsX18vZywgaW5kZXgpO1xuICAgICAgICBuZXdGb3JtID0gbmV3Rm9ybS5yZXBsYWNlKC9fX25hbWVfXy9nLCBpbmRleCk7XG4gICAgICAgICRjb2xsZWN0aW9uSW1hZ2VIb2xkZXIuZGF0YSgnaW5kZXgnLCBpbmRleCArIDEpO1xuICAgICAgICBsZXQgJG5ld0Zvcm1EaXYgPSAkKCc8ZGl2IGNsYXNzPVwiaW1hZ2VcIj48L2Rpdj4nKS5hcHBlbmQobmV3Rm9ybSkuYXBwZW5kKCc8aHI+Jyk7XG4gICAgICAgICRuZXdGb3JtRGl2LmZpbmQoJyNtYW5nYV9pbWFnZXNfJytpbmRleCkuZmluZCgnbGFiZWwuY3VzdG9tLWZpbGUtbGFiZWwnKS50ZXh0KCdDaG9pc2lyIHVuIGZpY2hpZXInKTtcbiAgICAgICAgJG5ld0xpbmtJbWFnZURpdi5iZWZvcmUoJG5ld0Zvcm1EaXYpO1xuICAgICAgICBhZGRJbWFnZUZvcm1EZWxldGVMaW5rKCRuZXdGb3JtRGl2KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBhZGRJbWFnZUZvcm1EZWxldGVMaW5rKCRuZXdGb3JtRGl2KSB7XG4gICAgICAgIGxldCAkcmVtb3ZlRm9ybUJ1dHRvbiA9ICQoJzxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi1kYW5nZXJcIj5TdXBwcmltZXIgY2V0dGUgaW1hZ2U8L2J1dHRvbj4nKTtcbiAgICAgICAgJG5ld0Zvcm1EaXYuYXBwZW5kKCRyZW1vdmVGb3JtQnV0dG9uKTtcblxuICAgICAgICAkcmVtb3ZlRm9ybUJ1dHRvbi5vbignY2xpY2snLCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAkbmV3Rm9ybURpdi5yZW1vdmUoKTtcbiAgICAgICAgfSk7XG4gICAgfVxufSlcbiJdLCJzb3VyY2VSb290IjoiIn0=