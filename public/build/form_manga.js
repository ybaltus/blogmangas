(window["webpackJsonp"] = window["webpackJsonp"] || []).push([["form_manga"],{

/***/ "./assets/js/form_manga.js":
/*!*********************************!*\
  !*** ./assets/js/form_manga.js ***!
  \*********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function($) {__webpack_require__(/*! core-js/modules/es.array.find */ "./node_modules/core-js/modules/es.array.find.js");

__webpack_require__(/*! core-js/modules/es.regexp.exec */ "./node_modules/core-js/modules/es.regexp.exec.js");

__webpack_require__(/*! core-js/modules/es.string.replace */ "./node_modules/core-js/modules/es.string.replace.js");

var $isScanCheckbox = $('#manga_exist_scan');
var $divScans = $('#div_scans');
var $isEpisodeCheckbox = $('#manga_exist_episode');
var $divAnimes = $('#div_animes');
var $divImages = $('#div_images');
var $collectionAnimeHolder;
var $collectionImageHolder;
var $collectionImageHolderCurrent;
var $addEpisodeButton = $('<button type="button" class="btn btn-secondary add_anime_link" style="margin-bottom: 20px">Ajouter un Ã©pisode</button>');
var $newLinkAnimeDiv = $('<div></div>').append($addEpisodeButton);
var $addImageButton = $('<button type="button" class="btn btn-secondary add_image_link mt-3" style="margin-bottom: 20px">Ajouter une image</button>');
var $newLinkImageDiv = $('<div></div>').append($addImageButton);
$('fieldset').hide();
$(document).ready(function () {
  //Scans checkbox
  $isScanCheckbox.on('click', function (e) {
    if ($(this).is(":checked")) {
      $divScans.removeAttr('hidden');
    } else if ($(this).is(":not(:checked)")) {
      $divScans.attr('hidden', $divScans);
    }
  }); //Anime checkbox

  $isEpisodeCheckbox.on('click', function (e) {
    if ($(this).is(":checked")) {
      $divAnimes.removeAttr('hidden');
    } else if ($(this).is(":not(:checked)")) {
      $divAnimes.attr('hidden', $divAnimes);
    }
  }); //Anime Collection

  $collectionAnimeHolder = $('div.animes_add');
  $collectionAnimeHolder.append($newLinkAnimeDiv);
  $collectionAnimeHolder.data('index', $collectionAnimeHolder.find('.anime').length);
  $addEpisodeButton.on('click', function (e) {
    e.preventDefault();
    addEpisodeForm($collectionAnimeHolder, $newLinkAnimeDiv);
  });
  $collectionAnimeHolder.find('.anime').each(function () {
    addAnimeFormDeleteLink($(this));
  }); //Image Collection

  $collectionImageHolder = $('div.images_new');
  $collectionImageHolderCurrent = $('div.images_current');
  $collectionImageHolder.append($newLinkImageDiv);
  $collectionImageHolder.data('index', $collectionImageHolderCurrent.find('.image').length + $collectionImageHolder.find('.image').length);
  $addImageButton.on('click', function (e) {
    e.preventDefault();
    addImageForm($collectionImageHolder, $newLinkImageDiv);
  });
  $collectionImageHolder.find('.image').each(function () {
    addImageFormDeleteLink($(this));
  }); //Anime functions

  function addEpisodeForm($collectionAnimeHolder, $newLinkAnimeDiv) {
    var prototype = $collectionAnimeHolder.data('prototype');
    var index = $collectionAnimeHolder.data('index');
    var newForm = prototype;
    newForm = newForm.replace(/__name__label__/g, index);
    newForm = newForm.replace(/__name__/g, index);
    $collectionAnimeHolder.data('index', index + 1);
    var $newFormDiv = $('<div class="anime"></div>').append(newForm).append('<hr>');
    $newFormDiv.find('#manga_animes_' + index).find('.form-group').addClass('col-md-4');
    $newFormDiv.find('#manga_animes_' + index).attr('class', 'form-inline');
    $newFormDiv.find('#manga_animes_' + index).find('.form-control').attr('class', 'col-md-6');
    $newLinkAnimeDiv.before($newFormDiv);
    addAnimeFormDeleteLink($newFormDiv);
  }

  function addAnimeFormDeleteLink($newFormDiv) {
    var $removeFormButton = $('<button type="button" class="btn btn-danger">Supprimer cet anime</button>');
    $newFormDiv.append($removeFormButton);
    $removeFormButton.on('click', function (e) {
      $newFormDiv.remove();
    });
  } //Image functions


  function addImageForm($collectionImageHolder, $newLinkImageDiv) {
    var prototype = $collectionImageHolder.data('prototype');
    var index = $collectionImageHolder.data('index');
    var newForm = prototype;
    newForm = newForm.replace(/__name__label__/g, index);
    newForm = newForm.replace(/__name__/g, index);
    $collectionImageHolder.data('index', index + 1);
    var $newFormDiv = $('<div class="image"></div>').append(newForm).append('<hr>');
    $newFormDiv.find('#manga_images_' + index).find('label.custom-file-label').text('Choisir un fichier');
    $newLinkImageDiv.before($newFormDiv);
    addImageFormDeleteLink($newFormDiv);
  }

  function addImageFormDeleteLink($newFormDiv) {
    var $removeFormButton = $('<button type="button" class="btn btn-danger">Supprimer cette image</button>');
    $newFormDiv.append($removeFormButton);
    $removeFormButton.on('click', function (e) {
      $newFormDiv.remove();
    });
  }
});
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.js")))

/***/ })

},[["./assets/js/form_manga.js","runtime","vendors~app~form_manga~manga~select2","vendors~form_manga"]]]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hc3NldHMvanMvZm9ybV9tYW5nYS5qcyJdLCJuYW1lcyI6WyIkaXNTY2FuQ2hlY2tib3giLCIkIiwiJGRpdlNjYW5zIiwiJGlzRXBpc29kZUNoZWNrYm94IiwiJGRpdkFuaW1lcyIsIiRkaXZJbWFnZXMiLCIkY29sbGVjdGlvbkFuaW1lSG9sZGVyIiwiJGNvbGxlY3Rpb25JbWFnZUhvbGRlciIsIiRjb2xsZWN0aW9uSW1hZ2VIb2xkZXJDdXJyZW50IiwiJGFkZEVwaXNvZGVCdXR0b24iLCIkbmV3TGlua0FuaW1lRGl2IiwiYXBwZW5kIiwiJGFkZEltYWdlQnV0dG9uIiwiJG5ld0xpbmtJbWFnZURpdiIsImhpZGUiLCJkb2N1bWVudCIsInJlYWR5Iiwib24iLCJlIiwiaXMiLCJyZW1vdmVBdHRyIiwiYXR0ciIsImRhdGEiLCJmaW5kIiwibGVuZ3RoIiwicHJldmVudERlZmF1bHQiLCJhZGRFcGlzb2RlRm9ybSIsImVhY2giLCJhZGRBbmltZUZvcm1EZWxldGVMaW5rIiwiYWRkSW1hZ2VGb3JtIiwiYWRkSW1hZ2VGb3JtRGVsZXRlTGluayIsInByb3RvdHlwZSIsImluZGV4IiwibmV3Rm9ybSIsInJlcGxhY2UiLCIkbmV3Rm9ybURpdiIsImFkZENsYXNzIiwiYmVmb3JlIiwiJHJlbW92ZUZvcm1CdXR0b24iLCJyZW1vdmUiLCJ0ZXh0Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBQSxJQUFNQSxlQUFlLEdBQUdDLENBQUMsQ0FBQyxtQkFBRCxDQUF6QjtBQUNBLElBQU1DLFNBQVMsR0FBR0QsQ0FBQyxDQUFDLFlBQUQsQ0FBbkI7QUFDQSxJQUFNRSxrQkFBa0IsR0FBR0YsQ0FBQyxDQUFDLHNCQUFELENBQTVCO0FBQ0EsSUFBTUcsVUFBVSxHQUFHSCxDQUFDLENBQUMsYUFBRCxDQUFwQjtBQUNBLElBQU1JLFVBQVUsR0FBR0osQ0FBQyxDQUFDLGFBQUQsQ0FBcEI7QUFFQSxJQUFJSyxzQkFBSjtBQUNBLElBQUlDLHNCQUFKO0FBQ0EsSUFBSUMsNkJBQUo7QUFDQSxJQUFJQyxpQkFBaUIsR0FBR1IsQ0FBQyxDQUFDLHdIQUFELENBQXpCO0FBQ0EsSUFBSVMsZ0JBQWdCLEdBQUdULENBQUMsQ0FBQyxhQUFELENBQUQsQ0FBaUJVLE1BQWpCLENBQXdCRixpQkFBeEIsQ0FBdkI7QUFDQSxJQUFJRyxlQUFlLEdBQUdYLENBQUMsQ0FBQyw0SEFBRCxDQUF2QjtBQUNBLElBQUlZLGdCQUFnQixHQUFHWixDQUFDLENBQUMsYUFBRCxDQUFELENBQWlCVSxNQUFqQixDQUF3QkMsZUFBeEIsQ0FBdkI7QUFDQVgsQ0FBQyxDQUFDLFVBQUQsQ0FBRCxDQUFjYSxJQUFkO0FBRUFiLENBQUMsQ0FBQ2MsUUFBRCxDQUFELENBQVlDLEtBQVosQ0FBa0IsWUFDbEI7QUFDSTtBQUNBaEIsaUJBQWUsQ0FBQ2lCLEVBQWhCLENBQW1CLE9BQW5CLEVBQTRCLFVBQVNDLENBQVQsRUFBVztBQUNuQyxRQUFHakIsQ0FBQyxDQUFDLElBQUQsQ0FBRCxDQUFRa0IsRUFBUixDQUFXLFVBQVgsQ0FBSCxFQUEwQjtBQUN0QmpCLGVBQVMsQ0FBQ2tCLFVBQVYsQ0FBcUIsUUFBckI7QUFDSCxLQUZELE1BR0ssSUFBR25CLENBQUMsQ0FBQyxJQUFELENBQUQsQ0FBUWtCLEVBQVIsQ0FBVyxnQkFBWCxDQUFILEVBQWdDO0FBQ2pDakIsZUFBUyxDQUFDbUIsSUFBVixDQUFlLFFBQWYsRUFBeUJuQixTQUF6QjtBQUNIO0FBQ0osR0FQRCxFQUZKLENBV0k7O0FBQ0FDLG9CQUFrQixDQUFDYyxFQUFuQixDQUFzQixPQUF0QixFQUErQixVQUFTQyxDQUFULEVBQVc7QUFDdEMsUUFBR2pCLENBQUMsQ0FBQyxJQUFELENBQUQsQ0FBUWtCLEVBQVIsQ0FBVyxVQUFYLENBQUgsRUFBMEI7QUFDdEJmLGdCQUFVLENBQUNnQixVQUFYLENBQXNCLFFBQXRCO0FBQ0gsS0FGRCxNQUdLLElBQUduQixDQUFDLENBQUMsSUFBRCxDQUFELENBQVFrQixFQUFSLENBQVcsZ0JBQVgsQ0FBSCxFQUFnQztBQUNqQ2YsZ0JBQVUsQ0FBQ2lCLElBQVgsQ0FBZ0IsUUFBaEIsRUFBMEJqQixVQUExQjtBQUNIO0FBQ0osR0FQRCxFQVpKLENBcUJJOztBQUNBRSx3QkFBc0IsR0FBR0wsQ0FBQyxDQUFDLGdCQUFELENBQTFCO0FBQ0FLLHdCQUFzQixDQUFDSyxNQUF2QixDQUE4QkQsZ0JBQTlCO0FBQ0FKLHdCQUFzQixDQUFDZ0IsSUFBdkIsQ0FBNEIsT0FBNUIsRUFBcUNoQixzQkFBc0IsQ0FBQ2lCLElBQXZCLENBQTRCLFFBQTVCLEVBQXNDQyxNQUEzRTtBQUNBZixtQkFBaUIsQ0FBQ1EsRUFBbEIsQ0FBcUIsT0FBckIsRUFBOEIsVUFBU0MsQ0FBVCxFQUFZO0FBQ3RDQSxLQUFDLENBQUNPLGNBQUY7QUFDQUMsa0JBQWMsQ0FBQ3BCLHNCQUFELEVBQXlCSSxnQkFBekIsQ0FBZDtBQUNILEdBSEQ7QUFLQUosd0JBQXNCLENBQUNpQixJQUF2QixDQUE0QixRQUE1QixFQUFzQ0ksSUFBdEMsQ0FBMkMsWUFBVztBQUNsREMsMEJBQXNCLENBQUMzQixDQUFDLENBQUMsSUFBRCxDQUFGLENBQXRCO0FBQ0gsR0FGRCxFQTlCSixDQWtDSTs7QUFDQU0sd0JBQXNCLEdBQUdOLENBQUMsQ0FBQyxnQkFBRCxDQUExQjtBQUNBTywrQkFBNkIsR0FBR1AsQ0FBQyxDQUFDLG9CQUFELENBQWpDO0FBQ0FNLHdCQUFzQixDQUFDSSxNQUF2QixDQUE4QkUsZ0JBQTlCO0FBQ0FOLHdCQUFzQixDQUFDZSxJQUF2QixDQUE0QixPQUE1QixFQUFzQ2QsNkJBQTZCLENBQUNlLElBQTlCLENBQW1DLFFBQW5DLEVBQTZDQyxNQUE3QyxHQUFzRGpCLHNCQUFzQixDQUFDZ0IsSUFBdkIsQ0FBNEIsUUFBNUIsRUFBc0NDLE1BQWxJO0FBRUFaLGlCQUFlLENBQUNLLEVBQWhCLENBQW1CLE9BQW5CLEVBQTRCLFVBQVNDLENBQVQsRUFDNUI7QUFDSUEsS0FBQyxDQUFDTyxjQUFGO0FBQ0FJLGdCQUFZLENBQUN0QixzQkFBRCxFQUF5Qk0sZ0JBQXpCLENBQVo7QUFDSCxHQUpEO0FBTUFOLHdCQUFzQixDQUFDZ0IsSUFBdkIsQ0FBNEIsUUFBNUIsRUFBc0NJLElBQXRDLENBQTJDLFlBQVc7QUFDbERHLDBCQUFzQixDQUFDN0IsQ0FBQyxDQUFDLElBQUQsQ0FBRixDQUF0QjtBQUNILEdBRkQsRUE5Q0osQ0FrREk7O0FBQ0EsV0FBU3lCLGNBQVQsQ0FBd0JwQixzQkFBeEIsRUFBZ0RJLGdCQUFoRCxFQUFrRTtBQUM5RCxRQUFJcUIsU0FBUyxHQUFHekIsc0JBQXNCLENBQUNnQixJQUF2QixDQUE0QixXQUE1QixDQUFoQjtBQUNBLFFBQUlVLEtBQUssR0FBRzFCLHNCQUFzQixDQUFDZ0IsSUFBdkIsQ0FBNEIsT0FBNUIsQ0FBWjtBQUVBLFFBQUlXLE9BQU8sR0FBR0YsU0FBZDtBQUNBRSxXQUFPLEdBQUdBLE9BQU8sQ0FBQ0MsT0FBUixDQUFnQixrQkFBaEIsRUFBb0NGLEtBQXBDLENBQVY7QUFDQUMsV0FBTyxHQUFHQSxPQUFPLENBQUNDLE9BQVIsQ0FBZ0IsV0FBaEIsRUFBNkJGLEtBQTdCLENBQVY7QUFDQTFCLDBCQUFzQixDQUFDZ0IsSUFBdkIsQ0FBNEIsT0FBNUIsRUFBcUNVLEtBQUssR0FBRyxDQUE3QztBQUNBLFFBQUlHLFdBQVcsR0FBR2xDLENBQUMsQ0FBQywyQkFBRCxDQUFELENBQStCVSxNQUEvQixDQUFzQ3NCLE9BQXRDLEVBQStDdEIsTUFBL0MsQ0FBc0QsTUFBdEQsQ0FBbEI7QUFDQXdCLGVBQVcsQ0FBQ1osSUFBWixDQUFpQixtQkFBaUJTLEtBQWxDLEVBQXlDVCxJQUF6QyxDQUE4QyxhQUE5QyxFQUE2RGEsUUFBN0QsQ0FBc0UsVUFBdEU7QUFDQUQsZUFBVyxDQUFDWixJQUFaLENBQWlCLG1CQUFpQlMsS0FBbEMsRUFBeUNYLElBQXpDLENBQThDLE9BQTlDLEVBQXVELGFBQXZEO0FBQ0FjLGVBQVcsQ0FBQ1osSUFBWixDQUFpQixtQkFBaUJTLEtBQWxDLEVBQXlDVCxJQUF6QyxDQUE4QyxlQUE5QyxFQUErREYsSUFBL0QsQ0FBb0UsT0FBcEUsRUFBNkUsVUFBN0U7QUFDQVgsb0JBQWdCLENBQUMyQixNQUFqQixDQUF3QkYsV0FBeEI7QUFDQVAsMEJBQXNCLENBQUNPLFdBQUQsQ0FBdEI7QUFDSDs7QUFFRCxXQUFTUCxzQkFBVCxDQUFnQ08sV0FBaEMsRUFBNkM7QUFDekMsUUFBSUcsaUJBQWlCLEdBQUdyQyxDQUFDLENBQUMsMkVBQUQsQ0FBekI7QUFDQWtDLGVBQVcsQ0FBQ3hCLE1BQVosQ0FBbUIyQixpQkFBbkI7QUFFQUEscUJBQWlCLENBQUNyQixFQUFsQixDQUFxQixPQUFyQixFQUE4QixVQUFTQyxDQUFULEVBQVk7QUFDdENpQixpQkFBVyxDQUFDSSxNQUFaO0FBQ0gsS0FGRDtBQUdILEdBMUVMLENBNEVJOzs7QUFDQSxXQUFTVixZQUFULENBQXNCdEIsc0JBQXRCLEVBQThDTSxnQkFBOUMsRUFBZ0U7QUFDNUQsUUFBSWtCLFNBQVMsR0FBR3hCLHNCQUFzQixDQUFDZSxJQUF2QixDQUE0QixXQUE1QixDQUFoQjtBQUNBLFFBQUlVLEtBQUssR0FBR3pCLHNCQUFzQixDQUFDZSxJQUF2QixDQUE0QixPQUE1QixDQUFaO0FBRUEsUUFBSVcsT0FBTyxHQUFHRixTQUFkO0FBQ0FFLFdBQU8sR0FBR0EsT0FBTyxDQUFDQyxPQUFSLENBQWdCLGtCQUFoQixFQUFvQ0YsS0FBcEMsQ0FBVjtBQUNBQyxXQUFPLEdBQUdBLE9BQU8sQ0FBQ0MsT0FBUixDQUFnQixXQUFoQixFQUE2QkYsS0FBN0IsQ0FBVjtBQUNBekIsMEJBQXNCLENBQUNlLElBQXZCLENBQTRCLE9BQTVCLEVBQXFDVSxLQUFLLEdBQUcsQ0FBN0M7QUFDQSxRQUFJRyxXQUFXLEdBQUdsQyxDQUFDLENBQUMsMkJBQUQsQ0FBRCxDQUErQlUsTUFBL0IsQ0FBc0NzQixPQUF0QyxFQUErQ3RCLE1BQS9DLENBQXNELE1BQXRELENBQWxCO0FBQ0F3QixlQUFXLENBQUNaLElBQVosQ0FBaUIsbUJBQWlCUyxLQUFsQyxFQUF5Q1QsSUFBekMsQ0FBOEMseUJBQTlDLEVBQXlFaUIsSUFBekUsQ0FBOEUsb0JBQTlFO0FBQ0EzQixvQkFBZ0IsQ0FBQ3dCLE1BQWpCLENBQXdCRixXQUF4QjtBQUNBTCwwQkFBc0IsQ0FBQ0ssV0FBRCxDQUF0QjtBQUNIOztBQUVELFdBQVNMLHNCQUFULENBQWdDSyxXQUFoQyxFQUE2QztBQUN6QyxRQUFJRyxpQkFBaUIsR0FBR3JDLENBQUMsQ0FBQyw2RUFBRCxDQUF6QjtBQUNBa0MsZUFBVyxDQUFDeEIsTUFBWixDQUFtQjJCLGlCQUFuQjtBQUVBQSxxQkFBaUIsQ0FBQ3JCLEVBQWxCLENBQXFCLE9BQXJCLEVBQThCLFVBQVNDLENBQVQsRUFBWTtBQUN0Q2lCLGlCQUFXLENBQUNJLE1BQVo7QUFDSCxLQUZEO0FBR0g7QUFDSixDQXBHRCxFIiwiZmlsZSI6ImZvcm1fbWFuZ2EuanMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCAkaXNTY2FuQ2hlY2tib3ggPSAkKCcjbWFuZ2FfZXhpc3Rfc2NhbicpO1xuY29uc3QgJGRpdlNjYW5zID0gJCgnI2Rpdl9zY2FucycpO1xuY29uc3QgJGlzRXBpc29kZUNoZWNrYm94ID0gJCgnI21hbmdhX2V4aXN0X2VwaXNvZGUnKTtcbmNvbnN0ICRkaXZBbmltZXMgPSAkKCcjZGl2X2FuaW1lcycpO1xuY29uc3QgJGRpdkltYWdlcyA9ICQoJyNkaXZfaW1hZ2VzJyk7XG5cbnZhciAkY29sbGVjdGlvbkFuaW1lSG9sZGVyO1xudmFyICRjb2xsZWN0aW9uSW1hZ2VIb2xkZXI7XG52YXIgJGNvbGxlY3Rpb25JbWFnZUhvbGRlckN1cnJlbnQ7XG52YXIgJGFkZEVwaXNvZGVCdXR0b24gPSAkKCc8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ0biBidG4tc2Vjb25kYXJ5IGFkZF9hbmltZV9saW5rXCIgc3R5bGU9XCJtYXJnaW4tYm90dG9tOiAyMHB4XCI+QWpvdXRlciB1biDDqXBpc29kZTwvYnV0dG9uPicpO1xudmFyICRuZXdMaW5rQW5pbWVEaXYgPSAkKCc8ZGl2PjwvZGl2PicpLmFwcGVuZCgkYWRkRXBpc29kZUJ1dHRvbik7XG52YXIgJGFkZEltYWdlQnV0dG9uID0gJCgnPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLXNlY29uZGFyeSBhZGRfaW1hZ2VfbGluayBtdC0zXCIgc3R5bGU9XCJtYXJnaW4tYm90dG9tOiAyMHB4XCI+QWpvdXRlciB1bmUgaW1hZ2U8L2J1dHRvbj4nKTtcbnZhciAkbmV3TGlua0ltYWdlRGl2ID0gJCgnPGRpdj48L2Rpdj4nKS5hcHBlbmQoJGFkZEltYWdlQnV0dG9uKTtcbiQoJ2ZpZWxkc2V0JykuaGlkZSgpO1xuXG4kKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpXG57XG4gICAgLy9TY2FucyBjaGVja2JveFxuICAgICRpc1NjYW5DaGVja2JveC5vbignY2xpY2snLCBmdW5jdGlvbihlKXtcbiAgICAgICAgaWYoJCh0aGlzKS5pcyhcIjpjaGVja2VkXCIpKXtcbiAgICAgICAgICAgICRkaXZTY2Fucy5yZW1vdmVBdHRyKCdoaWRkZW4nKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmKCQodGhpcykuaXMoXCI6bm90KDpjaGVja2VkKVwiKSl7XG4gICAgICAgICAgICAkZGl2U2NhbnMuYXR0cignaGlkZGVuJywgJGRpdlNjYW5zKTtcbiAgICAgICAgfVxuICAgIH0pXG5cbiAgICAvL0FuaW1lIGNoZWNrYm94XG4gICAgJGlzRXBpc29kZUNoZWNrYm94Lm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpe1xuICAgICAgICBpZigkKHRoaXMpLmlzKFwiOmNoZWNrZWRcIikpe1xuICAgICAgICAgICAgJGRpdkFuaW1lcy5yZW1vdmVBdHRyKCdoaWRkZW4nKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmKCQodGhpcykuaXMoXCI6bm90KDpjaGVja2VkKVwiKSl7XG4gICAgICAgICAgICAkZGl2QW5pbWVzLmF0dHIoJ2hpZGRlbicsICRkaXZBbmltZXMpO1xuICAgICAgICB9XG4gICAgfSlcblxuICAgIC8vQW5pbWUgQ29sbGVjdGlvblxuICAgICRjb2xsZWN0aW9uQW5pbWVIb2xkZXIgPSAkKCdkaXYuYW5pbWVzX2FkZCcpO1xuICAgICRjb2xsZWN0aW9uQW5pbWVIb2xkZXIuYXBwZW5kKCRuZXdMaW5rQW5pbWVEaXYpO1xuICAgICRjb2xsZWN0aW9uQW5pbWVIb2xkZXIuZGF0YSgnaW5kZXgnLCAkY29sbGVjdGlvbkFuaW1lSG9sZGVyLmZpbmQoJy5hbmltZScpLmxlbmd0aCk7XG4gICAgJGFkZEVwaXNvZGVCdXR0b24ub24oJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICAgICAgYWRkRXBpc29kZUZvcm0oJGNvbGxlY3Rpb25BbmltZUhvbGRlciwgJG5ld0xpbmtBbmltZURpdik7XG4gICAgfSk7XG5cbiAgICAkY29sbGVjdGlvbkFuaW1lSG9sZGVyLmZpbmQoJy5hbmltZScpLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgIGFkZEFuaW1lRm9ybURlbGV0ZUxpbmsoJCh0aGlzKSk7XG4gICAgfSk7XG5cbiAgICAvL0ltYWdlIENvbGxlY3Rpb25cbiAgICAkY29sbGVjdGlvbkltYWdlSG9sZGVyID0gJCgnZGl2LmltYWdlc19uZXcnKTtcbiAgICAkY29sbGVjdGlvbkltYWdlSG9sZGVyQ3VycmVudCA9ICQoJ2Rpdi5pbWFnZXNfY3VycmVudCcpO1xuICAgICRjb2xsZWN0aW9uSW1hZ2VIb2xkZXIuYXBwZW5kKCRuZXdMaW5rSW1hZ2VEaXYpO1xuICAgICRjb2xsZWN0aW9uSW1hZ2VIb2xkZXIuZGF0YSgnaW5kZXgnLCAoJGNvbGxlY3Rpb25JbWFnZUhvbGRlckN1cnJlbnQuZmluZCgnLmltYWdlJykubGVuZ3RoICsgJGNvbGxlY3Rpb25JbWFnZUhvbGRlci5maW5kKCcuaW1hZ2UnKS5sZW5ndGgpKTtcblxuICAgICRhZGRJbWFnZUJ1dHRvbi5vbignY2xpY2snLCBmdW5jdGlvbihlKVxuICAgIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBhZGRJbWFnZUZvcm0oJGNvbGxlY3Rpb25JbWFnZUhvbGRlciwgJG5ld0xpbmtJbWFnZURpdik7XG4gICAgfSlcblxuICAgICRjb2xsZWN0aW9uSW1hZ2VIb2xkZXIuZmluZCgnLmltYWdlJykuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgYWRkSW1hZ2VGb3JtRGVsZXRlTGluaygkKHRoaXMpKTtcbiAgICB9KTtcblxuICAgIC8vQW5pbWUgZnVuY3Rpb25zXG4gICAgZnVuY3Rpb24gYWRkRXBpc29kZUZvcm0oJGNvbGxlY3Rpb25BbmltZUhvbGRlciwgJG5ld0xpbmtBbmltZURpdikge1xuICAgICAgICBsZXQgcHJvdG90eXBlID0gJGNvbGxlY3Rpb25BbmltZUhvbGRlci5kYXRhKCdwcm90b3R5cGUnKTtcbiAgICAgICAgbGV0IGluZGV4ID0gJGNvbGxlY3Rpb25BbmltZUhvbGRlci5kYXRhKCdpbmRleCcpO1xuXG4gICAgICAgIGxldCBuZXdGb3JtID0gcHJvdG90eXBlO1xuICAgICAgICBuZXdGb3JtID0gbmV3Rm9ybS5yZXBsYWNlKC9fX25hbWVfX2xhYmVsX18vZywgaW5kZXgpO1xuICAgICAgICBuZXdGb3JtID0gbmV3Rm9ybS5yZXBsYWNlKC9fX25hbWVfXy9nLCBpbmRleCk7XG4gICAgICAgICRjb2xsZWN0aW9uQW5pbWVIb2xkZXIuZGF0YSgnaW5kZXgnLCBpbmRleCArIDEpO1xuICAgICAgICBsZXQgJG5ld0Zvcm1EaXYgPSAkKCc8ZGl2IGNsYXNzPVwiYW5pbWVcIj48L2Rpdj4nKS5hcHBlbmQobmV3Rm9ybSkuYXBwZW5kKCc8aHI+Jyk7XG4gICAgICAgICRuZXdGb3JtRGl2LmZpbmQoJyNtYW5nYV9hbmltZXNfJytpbmRleCkuZmluZCgnLmZvcm0tZ3JvdXAnKS5hZGRDbGFzcygnY29sLW1kLTQnKTtcbiAgICAgICAgJG5ld0Zvcm1EaXYuZmluZCgnI21hbmdhX2FuaW1lc18nK2luZGV4KS5hdHRyKCdjbGFzcycsICdmb3JtLWlubGluZScpO1xuICAgICAgICAkbmV3Rm9ybURpdi5maW5kKCcjbWFuZ2FfYW5pbWVzXycraW5kZXgpLmZpbmQoJy5mb3JtLWNvbnRyb2wnKS5hdHRyKCdjbGFzcycsICdjb2wtbWQtNicpO1xuICAgICAgICAkbmV3TGlua0FuaW1lRGl2LmJlZm9yZSgkbmV3Rm9ybURpdik7XG4gICAgICAgIGFkZEFuaW1lRm9ybURlbGV0ZUxpbmsoJG5ld0Zvcm1EaXYpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGFkZEFuaW1lRm9ybURlbGV0ZUxpbmsoJG5ld0Zvcm1EaXYpIHtcbiAgICAgICAgbGV0ICRyZW1vdmVGb3JtQnV0dG9uID0gJCgnPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLWRhbmdlclwiPlN1cHByaW1lciBjZXQgYW5pbWU8L2J1dHRvbj4nKTtcbiAgICAgICAgJG5ld0Zvcm1EaXYuYXBwZW5kKCRyZW1vdmVGb3JtQnV0dG9uKTtcblxuICAgICAgICAkcmVtb3ZlRm9ybUJ1dHRvbi5vbignY2xpY2snLCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAkbmV3Rm9ybURpdi5yZW1vdmUoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy9JbWFnZSBmdW5jdGlvbnNcbiAgICBmdW5jdGlvbiBhZGRJbWFnZUZvcm0oJGNvbGxlY3Rpb25JbWFnZUhvbGRlciwgJG5ld0xpbmtJbWFnZURpdikge1xuICAgICAgICBsZXQgcHJvdG90eXBlID0gJGNvbGxlY3Rpb25JbWFnZUhvbGRlci5kYXRhKCdwcm90b3R5cGUnKTtcbiAgICAgICAgbGV0IGluZGV4ID0gJGNvbGxlY3Rpb25JbWFnZUhvbGRlci5kYXRhKCdpbmRleCcpO1xuXG4gICAgICAgIGxldCBuZXdGb3JtID0gcHJvdG90eXBlO1xuICAgICAgICBuZXdGb3JtID0gbmV3Rm9ybS5yZXBsYWNlKC9fX25hbWVfX2xhYmVsX18vZywgaW5kZXgpO1xuICAgICAgICBuZXdGb3JtID0gbmV3Rm9ybS5yZXBsYWNlKC9fX25hbWVfXy9nLCBpbmRleCk7XG4gICAgICAgICRjb2xsZWN0aW9uSW1hZ2VIb2xkZXIuZGF0YSgnaW5kZXgnLCBpbmRleCArIDEpO1xuICAgICAgICBsZXQgJG5ld0Zvcm1EaXYgPSAkKCc8ZGl2IGNsYXNzPVwiaW1hZ2VcIj48L2Rpdj4nKS5hcHBlbmQobmV3Rm9ybSkuYXBwZW5kKCc8aHI+Jyk7XG4gICAgICAgICRuZXdGb3JtRGl2LmZpbmQoJyNtYW5nYV9pbWFnZXNfJytpbmRleCkuZmluZCgnbGFiZWwuY3VzdG9tLWZpbGUtbGFiZWwnKS50ZXh0KCdDaG9pc2lyIHVuIGZpY2hpZXInKTtcbiAgICAgICAgJG5ld0xpbmtJbWFnZURpdi5iZWZvcmUoJG5ld0Zvcm1EaXYpO1xuICAgICAgICBhZGRJbWFnZUZvcm1EZWxldGVMaW5rKCRuZXdGb3JtRGl2KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBhZGRJbWFnZUZvcm1EZWxldGVMaW5rKCRuZXdGb3JtRGl2KSB7XG4gICAgICAgIGxldCAkcmVtb3ZlRm9ybUJ1dHRvbiA9ICQoJzxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi1kYW5nZXJcIj5TdXBwcmltZXIgY2V0dGUgaW1hZ2U8L2J1dHRvbj4nKTtcbiAgICAgICAgJG5ld0Zvcm1EaXYuYXBwZW5kKCRyZW1vdmVGb3JtQnV0dG9uKTtcblxuICAgICAgICAkcmVtb3ZlRm9ybUJ1dHRvbi5vbignY2xpY2snLCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAkbmV3Rm9ybURpdi5yZW1vdmUoKTtcbiAgICAgICAgfSk7XG4gICAgfVxufSlcbiJdLCJzb3VyY2VSb290IjoiIn0=